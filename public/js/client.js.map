{"version":3,"sources":["client.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"client.js","sourcesContent":["new Vue({\n\n    el: \"#client\",\n\n    /**\n     * Called when page is loaded\n     */\n    ready: function() {\n        this.getPageData();\n    },\n\n    methods: {\n\n        /**\n         * Make ajax request to load initial page data\n         */\n        getPageData: function() {\n\n            this.showLoader(this.getClientTranslation('loading'));\n\n            var url = '/clients/' + this.getClientTranslation('client-id') + '/get';\n\n            // Make request to get page data\n            this.$http.get(url, function(response) {\n\n                // Update models\n                this.$set('name', response.data.name);\n                this.$set('phone', response.data.phone_number);\n                this.$set('oldName', this.$get('name'));\n                this.$set('oldPhone', this.$get('phone'));\n\n                this.$set('client', response.data);\n\n                // Hide loader\n                this.$set('loaded', true);\n                swal.close();\n            });\n        },\n\n        /**\n         * Allow user to edit clients name\n         */\n        saveName: function() {\n\n            this.showLoader(this.getClientTranslation('title'));\n\n            // Build url and data to post\n            var url = '/clients/' + this.getClientTranslation('client-id') + '/edit-name';\n            var data = {\n                name: this.$get('name'),\n                _token: this.getToken()\n            };\n\n            var thisInstance = this;\n\n            // Make request\n            this.$http.post(url, data).success(function(response) {\n\n                this.showSuccessAlert(response.title, response.message);\n\n            }).error(function(response) {\n\n                this.showErrorAlert(response.title, response.message);\n\n                // Typed name is not valid so display the old one\n                thisInstance.$set('name', thisInstance.$get('oldName'));\n\n            });\n\n        },\n\n        /**\n         * Allow user to edit clients phone number\n         */\n        savePhone: function() {\n\n            this.showLoader(this.getClientTranslation('loading'));\n\n            // Build url and data object to post\n            var url = '/clients/' + this.getClientTranslation('client-id') + '/edit-phone';\n            var data = {\n                phone: this.$get('phone'),\n                _token: this.getToken()\n            };\n\n            var thisInstance = this;\n\n            // Make request\n            this.$http.post(url, data, function(response) {\n\n                this.showSuccessAlert(response.title, response.message);\n\n            }).error(function(response) {\n\n                this.showErrorAlert(response.title, response.message);\n\n                // Typed phone is not valid so display the old one\n                thisInstance.$set('phone', thisInstance.$get('oldPhone'));\n\n            });\n\n        },\n\n        /**\n         * Show sweet alert loader\n         *\n         * @param title\n         */\n        showLoader: function(title) {\n            swal({\n                title: title,\n                type: \"info\",\n                showConfirmButton: false\n            });\n        },\n\n\n        /**\n         * Show success alert\n         *\n         * @param title\n         * @param message\n         */\n        showSuccessAlert: function(title, message) {\n            this.showAlert('success', title, message);\n        },\n\n        /**\n         * Show error alert\n         *\n         * @param title\n         * @param message\n         */\n        showErrorAlert: function(title, message) {\n            this.showAlert('error', title, message);\n        },\n\n        /**\n         * Show sweet alert box\n         *\n         * @param type\n         * @param title\n         * @param message\n         */\n        showAlert: function(type, title, message) {\n            swal({\n                title: title,\n                text: message,\n                type: type,\n                timer: 1750,\n                showConfirmButton: false\n            });\n        },\n\n        /**\n         * Get client page translation that match given attribute\n         *\n         * @param attribute\n         * @returns {*|jQuery}\n         */\n        getClientTranslation: function(attribute) {\n            return $('#client-trans').attr(attribute);\n        },\n\n        /**\n         * Return application token\n         *\n         * @returns {*|jQuery}\n         */\n        getToken: function() {\n            return $('#token').attr('content');\n        }\n    }\n});"],"sourceRoot":"/source/"}