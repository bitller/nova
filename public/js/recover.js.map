{"version":3,"sources":["recover.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"recover.js","sourcesContent":["new Vue({\n\n    /**\n     * Target element.\n     */\n    el: '#recover',\n\n    /**\n     * Available methods.\n     */\n    methods: {\n\n        /**\n         * Make post request to send email with reset link.\n         */\n        recover: function() {\n            this.resetErrors();\n            this.$set('loading', true);\n\n            // Build post data\n            var data = {\n                _token: Token.get(),\n                email: this.$get('email')\n            };\n\n            this.$http.post('/recover', data, function(response) {\n\n                // Handle success response\n                this.$set('loading', false);\n                Alert.success(response.title, response.message, 'keep');\n\n            }).error(function(response) {\n\n                // Handle error response\n                this.$set('loading', false);\n                if (response.errors) {\n                    this.$set('errors', response.errors);\n                    return;\n                }\n                if (!response.message) {\n                    this.$set('general_error', Translation.common('general-error'));\n                    return;\n                }\n\n                this.$set('general_error', response.message);\n\n            });\n        },\n\n        /**\n         * Allow user to set a new password.\n         */\n        setNewPassword: function() {\n\n            this.resetErrors();\n            this.$set('loading', true);\n\n            // Build post data\n            var data = {\n                _token: Token.get(),\n                new_password: this.$get('new_password'),\n                new_password_confirmation: this.$get('new_password_confirmation')\n            };\n\n            this.$http.post('/recover/' + $('#user_id').attr('content') + '/' + $('#code').attr('content'), data, function(response) {\n\n                this.$set('loading', false);\n\n                Alert.success(response.title, response.message, 'keep');\n                setTimeout(function() {\n                    window.location.replace('/login');\n                }, 2000);\n\n            }).error(function(response) {\n\n                this.$set('loading', false);\n                if (response.errors) {\n                    this.$set('errors', response.errors);\n                    return;\n                }\n                if (!response.message) {\n                    Alert.generalError();\n                    return;\n                }\n\n                this.$set('errors', response.errors);\n            });\n        },\n\n        /**\n         * Reset recover form errors.\n         */\n        resetErrors: function() {\n            this.$set('errors', '');\n            this.$set('general_error', '');\n        }\n    }\n});"],"sourceRoot":"/source/"}