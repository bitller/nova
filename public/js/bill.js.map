{"version":3,"sources":["bill.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bill.js","sourcesContent":["new Vue({\n\n    el: '#bill',\n\n    data: {\n        code: '',\n        page: '',\n        discount: '',\n        price: '',\n        quantity: ''\n    },\n\n    ready: function() {\n        this.getBill();\n    },\n\n    methods: {\n\n        /**\n         * Make request to get user bills.\n         *\n         * @param showSuccess callback when get bills request is finished\n         * @param hideLoader If set to true, loading alert will not be displayed\n         */\n        getBill: function(showSuccess, hideLoader) {\n\n            if (typeof hideLoader === 'undefined') {\n                Alert.loader();\n            }\n\n            this.$http.get('/bills/' + $('#bill').attr('bill-id') + '/get', function(response) {\n\n                this.$set('bill', response);\n                this.$set('loaded', true);\n\n                if (typeof showSuccess === 'undefined') {\n                    Alert.close();\n                    return;\n                }\n                showSuccess();\n            });\n\n        },\n\n        addProduct: function(productId, productCode) {\n\n            // Build post data\n            var data = {\n                product_code: this.$get('code'),\n                product_page: this.$get('page'),\n                product_price: this.$get('price'),\n                product_discount: this.$get('discount'),\n                product_quantity: this.$get('quantity')\n            };\n\n            // Make post request\n            this.$http.post('/bills/' + Data.getBillId() + '/add', data, function(response) {\n\n                if (!response.success) {\n                    this.$set('error', response.message);\n                    return;\n                }\n\n                this.getBill(function() {\n                    $('#addProductToBillModal').modal('hide');\n                    Alert.success('Product added!', 'Product successfully added to this bill.');\n                }, true);\n\n            }).error(function(response) {\n                if (response.message) {\n                    this.$set('error', response.message)\n                }\n            });\n\n        },\n\n        resetModal: function() {\n            this.$set('page', '');\n            this.$set('code', '');\n            this.$set('price', '');\n            this.$set('quantity', '');\n            this.$set('discount', '');\n            this.$set('error', false);\n        },\n\n        /**\n         * Edit product page from bill.\n         *\n         * @param productPage\n         * @param productId\n         * @param productCode\n         * @param billProductId\n         */\n        editPage: function(productPage, productId, productCode, billProductId) {\n\n            var thisInstance = this;\n\n            Alert.editPage(productPage, function(inputValue) {\n\n                var data = {\n                    product_id: productId,\n                    bill_product_id: billProductId,\n                    product_code: productCode,\n                    product_page: inputValue\n                };\n\n                thisInstance.$http.post('/bills/' + $('#bill').attr('bill-id') + '/edit-page/', data, function(response) {\n\n                    // Handle success response\n                    if (response.success) {\n                        this.getBill(function() {\n                            Alert.success(Translation.common('success'), Translation.bill('page-updated'));\n                        }, true);\n                        return true;\n                    }\n\n                }).error(function(response) {\n\n                    if (response.message) {\n                        Alert.error(response.message);\n                        return false;\n                    }\n\n                    Alert.generalError();\n                });\n            });\n        },\n\n        /**\n         * Edit product quantity.\n         *\n         * @param productQuantity\n         * @param productId\n         * @param productCode\n         */\n        editQuantity: function(productQuantity, productId, productCode, billProductId) {\n\n            var thisInstance = this;\n\n            // Show edit quantity alert\n            Alert.editQuantity(productQuantity, function(inputValue) {\n\n                // Build post data\n                var data = {\n                    product_id: productId,\n                    bill_product_id: billProductId,\n                    product_code: productCode,\n                    product_quantity: inputValue\n                };\n\n                // Make post request\n                thisInstance.$http.post('/bills/' + $('#bill').attr('bill-id') + '/edit-quantity', data, function(response) {\n\n                    if (response.success) {\n                        this.getBill(function() {\n                            Alert.success(Translation.common('success'), Translation.bill('quantity-updated'));\n                        }, true);\n                        return true;\n                    }\n\n                }).error(function(response) {\n\n                    if (response.message) {\n                        Alert.error(response.title, response.message);\n                        return false;\n                    }\n\n                    Alert.generalError();\n                });\n            });\n        },\n\n        /**\n         * Edit product price.\n         *\n         * @param productPrice\n         * @param productId\n         * @param productCode\n         */\n        editPrice: function(productPrice, productId, productCode, billProductId) {\n\n            var thisInstance = this;\n\n            // Show edit price alert\n            Alert.editPrice(productPrice, function(inputValue) {\n\n                // Post data\n                var data = {\n                    product_id: productId,\n                    bill_product_id: billProductId,\n                    product_code: productCode,\n                    product_price: inputValue\n                };\n\n                // Make post request\n                thisInstance.$http.post('/bills/' + $('#bill').attr('bill-id') + '/edit-price', data, function(response) {\n\n                    if (response.success) {\n                        this.getBill(function() {\n                            Alert.success(Translation.common('success'), Translation.bill('price-updated'));\n                        }, true);\n                        return true;\n                    }\n\n                }).error(function(response) {\n\n                    if (response.message) {\n                        Alert.error(response.title, response.message);\n                        return false;\n                    }\n\n                    Alert.generalError();\n                });\n            });\n        },\n\n        /**\n         * Edit product discount.\n         *\n         * @param productDiscount\n         * @param productId\n         * @param productCode\n         */\n        editDiscount: function(productDiscount, productId, productCode, billProductId) {\n\n            var thisInstance = this;\n\n            // Show edit discount alert\n            Alert.editDiscount(productDiscount, function(inputValue) {\n\n                // Data used is post request\n                var data = {\n                    product_id: productId,\n                    bill_product_id: billProductId,\n                    product_code: productCode,\n                    product_discount: inputValue\n                };\n\n                // Do request\n                thisInstance.$http.post('/bills/' + $('#bill').attr('bill-id') + '/edit-discount', data, function(response) {\n\n                    // Handle success response\n                    if (response.success) {\n                        this.getBill(function() {\n                            Alert.success(Translation.common('success'), Translation.bill('discount-updated'));\n                        }, true);\n                        return true;\n                    }\n                }).error(function(response) {\n\n                    // Handle error response\n                    if (response.message) {\n                        Alert.error(response.title, response.message);\n                        return false;\n                    }\n\n                    Alert.generalError();\n                });\n            });\n\n        },\n\n        /**\n         * Delete product from bill.\n         *\n         * @param id\n         * @param code\n         */\n        deleteProduct: function(id, code, billProductId) {\n\n            var thisInstance = this;\n\n            // Ask for confirmation\n            Alert.confirmDelete(function() {\n\n                // Show loader\n                Alert.loader();\n\n                // Make request\n                thisInstance.$http.get('/bills/' + $('#bill').attr('bill-id') + '/delete/' + id + '/' + code + '/' + billProductId, function(response) {\n\n                    // If a success response is returned reload products and show a success message\n                    if (response.success) {\n                        this.getBill(function() {\n                            Alert.success(Translation.common('success'), Translation.common('product-deleted'));\n                        });\n                        return;\n                    }\n\n                    Alert.generalError();\n\n                }).error(function(response) {\n                    Alert.generalError();\n                });\n            });\n        }\n    }\n});"],"sourceRoot":"/source/"}